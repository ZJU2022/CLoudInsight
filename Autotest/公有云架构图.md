# 公有云架构图

## 架构说明

本架构图展示了公有云的分层设计，从最终用户层到底层物理资源，每层都有明确的职责和测试重点。中台层作为核心支撑，提供计费、账号、监控、审计等关键服务，确保整个云平台的稳定运营。（供参考：例如k8s理论上应该放在Iaas）

+---------------------------------------------------------------------------------------+
| **最终用户层 (End Users & Tenants)**                                                   |
| *(使用云服务的客户或内部用户)*                                                              |
+---------------------------------------------------------------------------------------+
                         ^
                         | (通过 Portal/Console/API 使用服务)
                         v
+---------------------------------------------------------------------------------------+
|                                        **SaaS (Software as a Service)**                |
| [直接提供可消费的应用/服务]                                                                 |
| +----------------------+    +----------------------+     +----------------------+    |
| | **用户应用 (如 CRM, ERP)** | | **管理门户/控制台 (Portal)** | | **API 市场/服务目录**      | |
| +----------------------+    +----------------------+     +----------------------+    |
| (测试点: 最终业务功能、UI/UX、API、租户隔离)                                                      |
+---------------------------------------------------------------------------------------+
                         ^    ^    ^
                         |    |    | (服务编排、配置、监控)
                         |    |    | (依赖中台能力)
                         v    v    v
+=======================================================================================+
|                             **中台层 (Middleware / Shared Services)**                 | <--- 
| [为云平台自身提供统一、可复用的管理和运营支撑能力]                                                     |
| +----------------+     +----------------+     +----------------+     +----------------+ |
| | **计费系统     |<--->| **账号系统      |<--->| **监控告警系统   |<--->| **审计日志系统   | |
| | (Billing)**    |     | (IAM)**        |     | (Monitoring)** |     | (Audit Log)**   | |
| |                |     |                |     |                |     |                | |
| | 计量数据输入 <--+ +--> 认证授权          |     | 指标/日志采集 <--+ +--> 操作记录        | |
| |    ^ |          |     |  ^ |           |     |    ^ |          |     |    ^ |         | |
| |    | v (计费指令) |     |  | v (策略下发)  |     |    | v (告警触发) |     |    |         | |
| +----|-------------+     +--|-------------+     +----|-------------+     +----|---------+ |
|      v (资源计量数据)       v (访问控制令牌)          v (监控数据消费)          v (日志查询)   |
+=======================================================================================+
        ^           ^            ^            ^                ^
        |           |            |            |                |
        | (用量)     | (权限)      | (状态)       | (操作)          | (日志)
        |           |            |            |                |
        v           v            v            v                v
+---------------------------------------------------------------------------------------+
|                                        **PaaS (Platform as a Service)**               |
| [提供可消费的平台服务]                                                                     |
| +----------------+    +-----------------+    +-----------------+    +---------------+ |
| | **Kubernetes** |    | **数据库服务**   |    | **消息队列**    |    | **函数计算**  | |
| | (Master/Node)  |    |(MySQL/PG/SQL..)| |    |(MQ/RabbitMQ..)| |    |(FaaS)        | |
| +----------------+    +-----------------+    +-----------------+    +---------------+ |
| (测试点: 服务API、管理面、高可用、与IaaS/中台集成)                                                  |
+---------------------------------------------------------------------------------------+
        ^           ^            ^            ^                ^
        | (资源)     | (存储/网络)  | (网络)       | (计算事件)      | (资源/网络)
        |           |            |            |                |
        v           v            v            v                v
+---------------------------------------------------------------------------------------+
|                                        **IaaS (Infrastructure as a Service)**         |
| [提供基础计算、存储、网络资源]                                                                 |
| +-------------------+     +----------------------+     +-----------------------+     |
| | **主机 (UHost)**   |     | **虚拟网络 (VPC)**     |     | **块存储/对象存储**     |     |
| | (VM)              |     | (子网/路由/ACL/网关)   |     | (云盘/EBS/S3...)      |     |
| +-------------------+     +----------------------+     +-----------------------+     |
| (测试点: 资源API、性能、可靠性、安全、网络功能、存储功能)                                            |
+---------------------------------------------------------------------------------------+
                         ^
                         | (虚拟化抽象、驱动、内核调度)
                         v
+---------------------------------------------------------------------------------------+
| **物理层 & 内核层**                                                                      |
| (物理服务器、Hypervisor、Host OS Kernel)                                                   |
| (测试点: 硬件兼容性、内核稳定性、热升级、热迁移、驱动健壮性)                                           |
+---------------------------------------------------------------------------------------+