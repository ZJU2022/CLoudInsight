## 云盘

- **云硬盘**：  
  “云盘”或者“云磁盘”，就是云虚拟机上可以挂载和使用的硬盘。这里，它既包含了用于承载操作系统的系统盘，也包括了承载数据的数据盘。

- **块存储**：  
  在云计算领域，有时我们还会把云端磁盘服务叫做块存储（Block Storage），因为它们与 Linux 操作系统中的块设备相对应，是云上提供的“裸盘”，可以格式化并且施加文件系统。

- **云盘核心功能**：  
  数据持久化（专业上被称为“非易失性存储”），就是说写入的数据不会丢失。即便所在虚拟机重启、关机甚至下线删除，这块云硬盘只要还存在，其中的数据也并不会被擦除。

- **容错**：  
  云厂商对于云盘，不仅会保障数据的顺利写入，一般还会帮你在存储端同步和保留至少三份副本的数据。所以说，云硬盘的冗余度和可用性是非常之高的。

- **云盘与传统磁盘的关系**：  
  云盘大多数是远程的，传统硬盘是通过本地机器内部主板的高速总线，与 CPU、内存等部件相连接；而在云端，你的硬盘则很可能并不在宿主机上，而是在专用的磁盘服务器阵列中，两者是通过数据中心内部的特有 IO 线路进行连接。

- **云上IO优化实例**：  
  本质上是优化云虚拟机与云盘之间的网络传输。

- **测试磁盘性能表现**：  
  可使用 `fio` 工具来测试磁盘性能表现。

- **本地磁盘**：  
  本地磁盘直接位于宿主机上的硬盘，在云端依然可以使用。对于临时数据存储，或者上层软件考虑到硬件不可靠性设计了上层的存储冗余机制，可以使用本地硬盘，它有相对高性能和低成本的优势。

### 云盘性能等级

| 等级 | 存储介质       | IOPS            | 描述 |
| ---- | -------------- | --------------- | ---- |
| 1    | HDD            | 数百            | 第一个等级的云硬盘，是基于传统 HDD 硬盘构建而成的。这类云盘的性能一般，最高 IOPS 大概在数百左右。在很多的云上，已经不把它作为推荐的选择了。但它并非一无是处，成本低就是它的最大优势。在不注重性能的测试环境，或者是个人自用的服务器，它就是一个很好的选择。 |
| 2    | SSD/HDD        | 数百～数千      | 第二个等级，往往是基于混合硬盘，也就是结合 HDD 和 SSD 硬盘构建的云硬盘。它会综合发挥 SSD 的性能优势和 HDD 的容量优势。比如它可以用 SSD 部分来承载热点区域数据，或是作为缓存，来提高响应性能。在这个等级下，典型的 IOPS 为数千左右，是很多云上创建硬盘的默认选项，比较适合像是操作系统启动盘这样的常规负载。 |
| 3    | SSD            | 数千～数万      | 第三个等级的云硬盘，它的存储介质就是纯 SSD 硬盘了。虽然贵一些，但一分价钱一分货，这个等级下的云硬盘能够提供非常稳定的 IO 能力，IOPS 通常能够上万，也有相当不俗的吞吐量和较低的访问延时。你可以用它来承载生产环境中重要的关键业务应用，或是各类数据库等 IO 密集型应用。 |
| 4    | 高性能SSD      | 数万～数十万    | 第四个等级，也是当下业界的最高等级，就是进一步优化增强的最新 SSD 云盘。它一般会采用更新一代的企业级闪存硬件，配合自研或改进后的底层传输协议，和虚拟化技术栈的优化来提供服务。因此它能够达到惊人的性能水平，满足我们最为苛刻的性能场景需求，比如承载 SAP HANA（SAP 的高性能计算平台）、高并发 OLTP 数据库等等。这类 SSD 云盘的 IOPS 通常能够突破十万以上。 |
