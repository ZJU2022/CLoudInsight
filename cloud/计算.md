## 云虚拟机

云虚拟机：顾名思义，是在云端虚拟出的服务器。这个服务器你可以完全地控制它，从底层操作系统到安装上层应用。

### 云虚拟机技术实现

虚拟化技术是云虚拟机服务的核心，**“从Xen、KVM、VMWare、HyperV 等虚拟化方式演变而来”**。

### 虚拟化技术思路

使云端虚拟化性能损耗在不断减少，资源利用率不断提高。

### 云虚拟机与传统虚拟机的区别

- **体系结构不同**  
  最大的区别在于体系结构不同。云虚拟机的体系结构可以用一句话来概括：全面解耦的计算存储分离的设计思想。计算存储分离是云计算设计理念中最重要的思想之一，不仅仅体现在虚拟机上，也体现在其他的云服务架构中。

- **传统虚拟化**  
  传统的虚拟化往往是对单一物理机器资源的纵向切割，计算、存储、网络等各方面的能力都是一台物理机的子集。因此，从可伸缩性的角度来说，传统虚拟机存在较大的局限。当物理机的局部出现故障时，也很容易影响到里面的虚拟机。

- **云虚拟机的组成**  
  云虚拟机的组成有所不同。除了核心的 CPU 与内存部分仍属于一台宿主机外，它的网络、硬盘等其他部分则可以超脱于宿主机之外，享受云端其他基础设施的能力。大致架构如下图所示：

![!\[架构图\]](../img/%E8%AE%A1%E7%AE%97%E5%AD%98%E5%82%A8%E5%88%86%E7%A6%BB.png)

因此，云虚拟机本质上是云数据中心中的不同部分一起协作，“拼凑”而成的一台机器。这样虚拟出来的机器，在使用感受上与传统服务器并无不同，但在可扩展性和故障隔离方面具有很大的优势。一台云虚拟机可以同时挂载很多硬盘，还能够插上很多“网卡”，拥有多个不同的外部IP。这就是充分解耦带来的好处。

### 网络安全组

网络安全组是一层覆盖在虚拟机之外的网络防火墙。它能够控制虚拟机入站、出站的流量，并能根据协议、端口、流向等设定的规则，来决定是否允许流量通过。并且安全组工作在操作系统之外，并不影响VM性能。

### 虚拟机规格

#### 虚拟机类型

| 虚拟机类型   | CPU:内存比例 | 应用场景 |
| ------------ | ------------ | -------- |
| 通用均衡型   | 1:4          | 可用于建站、应用服务等各种常见负载，比如作为官网和企业应用程序的后端服务器等。如果你对未来工作负载的特征还没有经验和把握，那你也可以先使用通用型实例，等程序运行一段时间后再根据资源占用情况按需调整。 |
| 计算密集型   | 1:1，1:2     | 科学计算、视频编码、代码编译等计算密集型负载。 |
| 内存优化型   | 1:8及以上   | 在数据库、缓存服务、大数据分析等应用场景较为常见。 |
| 图形计算型   | 带GPU        | 一般用于机器学习和深度学习模型的训练和推理。随着 AI 的火热，这类机器也越来越多地出现在各种研发和生产环境中。 |
